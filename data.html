<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>London GPS Track Generator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .stats {
            background: #e8f4fd;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #007acc;
        }
        .download-btn {
            background: #007acc;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            display: block;
            margin: 20px auto;
            transition: background 0.3s;
        }
        .download-btn:hover {
            background: #005c99;
        }
        .preview {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid #ddd;
            margin: 20px 0;
        }
        .info {
            color: #666;
            font-size: 14px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸš— London GPS Track Dataset</h1>
        
        <div class="stats">
            <h3>Dataset Information</h3>
            <p><strong>Total Coordinates:</strong> <span id="totalCount">Loading...</span></p>
            <p><strong>Route:</strong> Multi-area London journey covering Westminster, London Bridge, Oxford Circus, Camden, Kensington, Hampstead, Greenwich, Wembley, Clapham, and Tottenham</p>
            <p><strong>Duration:</strong> <span id="duration">Loading...</span></p>
            <p><strong>Time Interval:</strong> 15-45 seconds between GPS points (realistic urban driving)</p>
            <p><strong>Format:</strong> JSON array with latitude, longitude, and ISO timestamp</p>
        </div>

        <button class="download-btn" onclick="downloadGPSData()">
            ðŸ“¥ Download Complete GPS Dataset (JSON)
        </button>

        <div class="info">
            <p><strong>File size:</strong> ~<span id="fileSize">Loading...</span> KB</p>
            <p><strong>Usage:</strong> Perfect for testing Mapbox routing with 20k+ coordinate scenarios</p>
        </div>

        <h3>Preview (First 5 coordinates):</h3>
        <div class="preview" id="preview">Loading...</div>

        <div class="info">
            <p><em>This dataset simulates realistic GPS tracking data for a vehicle traveling through London over approximately 9.5 hours. Each coordinate includes realistic GPS drift and timing variations typical of urban vehicle tracking.</em></p>
        </div>
    </div>

    <script>
        // Generate the same GPS data as before
        function generateLondonGPSTrack() {
            const coordinates = [];
            
            // London bounding box (approximate)
            const londonBounds = {
                north: 51.6723,
                south: 51.2867,
                east: 0.3340,
                west: -0.5103
            };
            
            // Define key London locations as waypoints
            const waypoints = [
                { lat: 51.5074, lng: -0.1278, name: "Westminster" },
                { lat: 51.5155, lng: -0.0922, name: "London Bridge" },
                { lat: 51.5194, lng: -0.1270, name: "Oxford Circus" },
                { lat: 51.5033, lng: -0.1195, name: "Waterloo" },
                { lat: 51.5085, lng: -0.0760, name: "Tower Bridge" },
                { lat: 51.5304, lng: -0.1240, name: "Camden" },
                { lat: 51.4994, lng: -0.1746, name: "Kensington" },
                { lat: 51.5642, lng: -0.1410, name: "Hampstead" },
                { lat: 51.4769, lng: -0.0005, name: "Greenwich" },
                { lat: 51.5558, lng: -0.2817, name: "Wembley" },
                { lat: 51.4545, lng: -0.1087, name: "Clapham" },
                { lat: 51.5906, lng: -0.0648, name: "Tottenham" }
            ];
            
            let currentTime = new Date('2024-01-15T09:00:00Z');
            
            // Generate route through multiple waypoints
            for (let i = 0; i < waypoints.length - 1; i++) {
                const start = waypoints[i];
                const end = waypoints[i + 1];
                
                // Calculate number of points between waypoints (80-120 points per segment)
                const pointsPerSegment = 80 + Math.floor(Math.random() * 40);
                
                // Generate interpolated points between waypoints
                for (let j = 0; j <= pointsPerSegment; j++) {
                    const progress = j / pointsPerSegment;
                    
                    // Linear interpolation with some randomness for realistic GPS drift
                    const lat = start.lat + (end.lat - start.lat) * progress + (Math.random() - 0.5) * 0.002;
                    const lng = start.lng + (end.lng - start.lng) * progress + (Math.random() - 0.5) * 0.002;
                    
                    // Ensure coordinates stay within London bounds
                    const boundedLat = Math.max(londonBounds.south, Math.min(londonBounds.north, lat));
                    const boundedLng = Math.max(londonBounds.west, Math.min(londonBounds.east, lng));
                    
                    coordinates.push({
                        latitude: parseFloat(boundedLat.toFixed(6)),
                        longitude: parseFloat(boundedLng.toFixed(6)),
                        timestamp: currentTime.toISOString()
                    });
                    
                    // Increment time by 15-45 seconds per point (realistic urban driving)
                    currentTime = new Date(currentTime.getTime() + (15000 + Math.random() * 30000));
                }
            }
            
            // Add some additional random points to reach 1000+ coordinates
            while (coordinates.length < 1000) {
                const lastPoint = coordinates[coordinates.length - 1];
                const newLat = lastPoint.latitude + (Math.random() - 0.5) * 0.005;
                const newLng = lastPoint.longitude + (Math.random() - 0.5) * 0.005;
                
                const boundedLat = Math.max(londonBounds.south, Math.min(londonBounds.north, newLat));
                const boundedLng = Math.max(londonBounds.west, Math.min(londonBounds.east, newLng));
                
                coordinates.push({
                    latitude: parseFloat(boundedLat.toFixed(6)),
                    longitude: parseFloat(boundedLng.toFixed(6)),
                    timestamp: currentTime.toISOString()
                });
                
                currentTime = new Date(currentTime.getTime() + (20000 + Math.random() * 25000));
            }
            
            return coordinates;
        }

        // Generate the data and update the page
        const gpsData = generateLondonGPSTrack();
        
        // Update stats
        document.getElementById('totalCount').textContent = gpsData.length.toLocaleString();
        
        const startTime = new Date(gpsData[0].timestamp);
        const endTime = new Date(gpsData[gpsData.length - 1].timestamp);
        const durationHours = Math.round((endTime - startTime) / (1000 * 60 * 60) * 10) / 10;
        document.getElementById('duration').textContent = `${durationHours} hours (${startTime.toLocaleTimeString()} - ${endTime.toLocaleTimeString()})`;
        
        const jsonString = JSON.stringify(gpsData, null, 2);
        const fileSizeKB = Math.round(new Blob([jsonString]).size / 1024);
        document.getElementById('fileSize').textContent = fileSizeKB.toLocaleString();
        
        // Show preview
        const preview = gpsData.slice(0, 5).map((coord, index) => 
            `${index + 1}. {\n    "latitude": ${coord.latitude},\n    "longitude": ${coord.longitude},\n    "timestamp": "${coord.timestamp}"\n  }`
        ).join(',\n  ');
        document.getElementById('preview').textContent = `[\n  ${preview}\n  ... ${(gpsData.length - 5).toLocaleString()} more coordinates\n]`;
        
        // Download function
        function downloadGPSData() {
            const dataStr = JSON.stringify(gpsData, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = `london_gps_track_${gpsData.length}_coordinates.json`;
            link.style.display = 'none';
            
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            URL.revokeObjectURL(url);
            
            // Update button text temporarily
            const btn = event.target;
            const originalText = btn.textContent;
            btn.textContent = 'âœ… Downloaded!';
            btn.style.background = '#28a745';
            setTimeout(() => {
                btn.textContent = originalText;
                btn.style.background = '#007acc';
            }, 2000);
        }
        
        // Make download function global
        window.downloadGPSData = downloadGPSData;
    </script>
</body>
</html>